<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“ æ¯”è³½æ—¥è¨˜ - å…„å¼ŸèªéŒ„æŒ‘æˆ°ç‰ˆ</title>
  <link rel="icon" href="icon-192.png">
  <style>
    body { font-family: 'Noto Sans TC', sans-serif; background: #fff9db; text-align: center; padding: 1rem; margin: 0; }
    h1, h2 { color: #d48806; margin-bottom: 1rem; }
    input, select, textarea { width: 90%; max-width: 500px; padding: 8px; font-size: 0.95rem; margin: 5px 0; border-radius: 8px; border: 1px solid #ccc; }
    #brothersScore, #opponentScore { width: 40%; font-size: 0.9rem; }
    button { padding: 8px 16px; font-size: 1rem; border: none; border-radius: 8px; margin: 5px; background: #fadb14; color: #333; cursor: pointer; transition: background 0.3s; }
    button:hover { background: #ffe58f; }
    #diaryList { margin-top: 2rem; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto; }
    .diary-item { background: #fff; padding: 1rem; border-radius: 10px; margin-bottom: 1rem; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .navbar { display: flex; justify-content: center; align-items: center; background: #ffffff; border-bottom: 1px solid #ddd; padding: 10px 0; flex-wrap: wrap; }
    .nav-left a { margin: 0 12px; font-size: 16px; color: #444; text-decoration: none; transition: all 0.3s ease; padding: 6px 10px; border-radius: 8px; }
    .nav-left a:hover { background: #fff9db; color: #d48806; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .nav-left a.active { background: #ffe58f; color: #d48806; font-weight: bold; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
  </style>
</head>
<body>
<nav class="navbar">
  <div class="nav-left">
    <a href="index.html">ğŸ  ä¸»é </a>
    <a href="plars.htm">ğŸ—•ï¸ è³½ç¨‹</a>
    <a href="plays.htm">ğŸ“ æ—¥è¨˜</a>
    <a href="players.html">ğŸ… çƒå“¡</a>
    <a href="cheers.html">ğŸ“– å•¦å•¦éšŠ</a>
  </div>
</nav>
<h2>ğŸ“Š å‹æ•—çµ±è¨ˆ</h2>
<div id="stats" style="margin-bottom:1rem; font-weight:bold; background:#fff7e6; padding:10px; border-radius:8px; color:#d48806;">å‹å ´ 0 | æ•—å ´ 0 | å¹³æ‰‹ 0</div>
<h2>ğŸ” æœå°‹æ¯”è³½ç´€éŒ„</h2>
<input type="text" id="searchInput" placeholder="è¼¸å…¥éšŠä¼æˆ–æ¯”æ•¸é—œéµå­—..." oninput="searchDiary()">
<button onclick="downloadDiary()">ğŸ“… ä¸‹è¼‰æ‰€æœ‰æ—¥è¨˜ (.txt)</button>
<h1>ğŸ“ æ¯”è³½è¨˜éŒ„</h1>
<input type="date" id="gameDate"><br>
<select id="gameTeams">
  <option value="">é¸æ“‡å°æˆ°éšŠä¼</option>
  <option value="ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs çµ±ä¸€ç…">ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs çµ±ä¸€ç…</option>
  <option value="ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs å‘³å…¨é¾">ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs å‘³å…¨é¾</option>
  <option value="ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs å¯Œé‚¦æ‚å°‡">ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs å¯Œé‚¦æ‚å°‡</option>
  <option value="ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs æ¨‚å¤©æ¡ƒçŒ¿">ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs æ¨‚å¤©æ¡ƒçŒ¿</option>
  <option value="ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs å°é‹¼é›„é·¹">ä¸­ä¿¡å…„å¼Ÿ(ä¸») vs å°é‹¼é›„é·¹</option>
  <option value="çµ±ä¸€ç… vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)">çµ±ä¸€ç… vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)</option>
  <option value="å‘³å…¨é¾ vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)">å‘³å…¨é¾ vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)</option>
  <option value="å¯Œé‚¦æ‚å°‡ vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)">å¯Œé‚¦æ‚å°‡ vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)</option>
  <option value="æ¨‚å¤©æ¡ƒçŒ¿ vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)">æ¨‚å¤©æ¡ƒçŒ¿ vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)</option>
  <option value="å°é‹¼é›„é·¹ vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)">å°é‹¼é›„é·¹ vs ä¸­ä¿¡å…„å¼Ÿ(å®¢)</option>
</select><br>
<input type="number" id="brothersScore" placeholder="å…„å¼Ÿå¾—åˆ†">
<input type="number" id="opponentScore" placeholder="å°æ‰‹å¾—åˆ†"><br>
<textarea id="gameNotes" placeholder="å¿ƒå¾—æˆ–ç‰¹åˆ¥æ„Ÿæƒ³ (é¸å¡«)"></textarea><br>
<input type="file" id="gamePhoto" accept="image/*"><br>
<button onclick="saveDiary()">ğŸ’¾ å„²å­˜æ¯”è³½ç´€éŒ„</button>
<div id="diaryList"></div>
<div id="photoModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); justify-content:center; align-items:center; flex-direction:column; z-index:9999;">
  <img id="modalImage" src="" style="max-width:90%; max-height:80%; border:5px solid white; border-radius:12px; margin-bottom:20px;">
  <div>
    <button onclick="prevPhoto()">â¬…ï¸ ä¸Šä¸€å¼µ</button>
    <button onclick="nextPhoto()">â¡ï¸ ä¸‹ä¸€å¼µ</button>
  </div>
</div>
<script>
let currentPhotoIndex = 0;
let currentPhotoList = [];

function saveDiary() {
  const date = document.getElementById('gameDate').value;
  const teams = document.getElementById('gameTeams').value;
  const brotherScore = document.getElementById('brothersScore').value.trim();
  const opponentScore = document.getElementById('opponentScore').value.trim();
  const notes = document.getElementById('gameNotes').value.trim();
  const photoInput = document.getElementById('gamePhoto');

  if (!date || !teams || brotherScore === "" || opponentScore === "") {
    alert('è«‹å¡«å¯«æ¯”è³½æ—¥æœŸã€é¸æ“‡å°æˆ°éšŠä¼ä¸¦è¼¸å…¥é›™æ–¹å¾—åˆ†ï¼');
    return;
  }

  const score = `${brotherScore}:${opponentScore}`;
  let result = "";
  if (parseInt(brotherScore) > parseInt(opponentScore)) {
    result = "ğŸ‰ å‹åˆ©";
  } else if (parseInt(brotherScore) < parseInt(opponentScore)) {
    result = "ğŸ˜¢ è½æ•—";
  } else {
    result = "ğŸ¤ å¹³æ‰‹";
  }

  const reader = new FileReader();
  reader.onload = function (e) {
    const photoData = e.target.result;
    const diaries = JSON.parse(localStorage.getItem('gameDiaries') || '[]');
    diaries.push({ date, teams, score, notes, result, photo: photoData });
    localStorage.setItem('gameDiaries', JSON.stringify(diaries));
    resetForm();
    loadDiary();
  };

  if (photoInput.files.length > 0) {
    reader.readAsDataURL(photoInput.files[0]);
  } else {
    const diaries = JSON.parse(localStorage.getItem('gameDiaries') || '[]');
    diaries.push({ date, teams, score, notes, result, photo: "" });
    localStorage.setItem('gameDiaries', JSON.stringify(diaries));
    resetForm();
    loadDiary();
  }
}

function resetForm() {
  document.getElementById('gameDate').value = '';
  document.getElementById('gameTeams').value = '';
  document.getElementById('brothersScore').value = '';
  document.getElementById('opponentScore').value = '';
  document.getElementById('gameNotes').value = '';
  document.getElementById('gamePhoto').value = '';
}

function loadDiary(filter = "") {
  const diaries = JSON.parse(localStorage.getItem('gameDiaries') || '[]');
  diaries.sort((a, b) => new Date(b.date) - new Date(a.date));
  currentPhotoList = diaries.filter(d => d.photo);

  const filteredDiaries = diaries.filter(d => {
    const content = `${d.date} ${d.teams} ${d.score} ${d.notes} ${d.result}`.toLowerCase();
    return content.includes(filter.toLowerCase());
  });

  const diaryList = document.getElementById('diaryList');
  diaryList.innerHTML = filteredDiaries.map((d, index) => `
    <div class="diary-item">
      <strong>ğŸ“… ${d.date}</strong><br>
      ğŸ†š ${d.teams}<br>
      ğŸŸï¸ æ¯”æ•¸ï¼š${d.score}<br>
      ${d.notes ? `ğŸ“ å¿ƒå¾—ï¼š${d.notes}<br>` : ''}
      <div style="font-weight:bold; margin-top:8px; ${d.result==='ğŸ‰ å‹åˆ©' ? 'color:#faad14;' : (d.result==='ğŸ˜¢ è½æ•—' ? 'color:gray;' : 'color:blue;')}">
        ğŸ† çµæœï¼š${d.result}
      </div>
      ${d.photo ? `<img src="${d.photo}" alt="æ¯”è³½ç…§ç‰‡" style="max-width:100%; margin-top:10px; border-radius:10px; cursor:pointer;" onclick="openModal(${currentPhotoList.indexOf(d)})">` : ''}
    </div>
  `).join('');

  updateStats();
}

function searchDiary() {
  const keyword = document.getElementById('searchInput').value;
  loadDiary(keyword);
}

function updateStats() {
  const diaries = JSON.parse(localStorage.getItem('gameDiaries') || '[]');
  let wins = 0, losses = 0, draws = 0;
  diaries.forEach(d => {
    if (d.result === "ğŸ‰ å‹åˆ©") wins++;
    else if (d.result === "ğŸ˜¢ è½æ•—") losses++;
    else if (d.result === "ğŸ¤ å¹³æ‰‹") draws++;
  });
  document.getElementById('stats').textContent = `å‹å ´ ${wins} | æ•—å ´ ${losses} | å¹³æ‰‹ ${draws}`;
}

function downloadDiary() {
  const diaries = JSON.parse(localStorage.getItem('gameDiaries') || '[]');
  if (diaries.length === 0) {
    alert('ç›®å‰æ²’æœ‰ä»»ä½•æ¯”è³½ç´€éŒ„å¯ä»¥ä¸‹è¼‰ï¼');
    return;
  }

  let content = 'ã€æ¯”è³½æ—¥è¨˜ç¸½è¦½ã€‘\\n\\n';
  diaries.forEach((d, i) => {
    content += `ç¬¬ ${i+1} å ´ï¼š\\n`;
    content += `æ—¥æœŸï¼š${d.date}\\n`;
    content += `å°æˆ°ï¼š${d.teams}\\n`;
    content += `æ¯”æ•¸ï¼š${d.score}\\n`;
    content += `çµæœï¼š${d.result}\\n`;
    if (d.notes) content += `å¿ƒå¾—ï¼š${d.notes}\\n`;
    content += '\\n----------------------\\n\\n';
  });

  const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'æ¯”è³½æ—¥è¨˜ç¸½è¦½.txt';
  a.click();
  URL.revokeObjectURL(url);
}

function openModal(index) {
  currentPhotoIndex = index;
  const modal = document.getElementById('photoModal');
  const img = document.getElementById('modalImage');
  img.src = currentPhotoList[currentPhotoIndex].photo;
  modal.style.display = 'flex';
}

function prevPhoto() {
  if (currentPhotoList.length === 0) return;
  currentPhotoIndex = (currentPhotoIndex - 1 + currentPhotoList.length) % currentPhotoList.length;
  document.getElementById('modalImage').src = currentPhotoList[currentPhotoIndex].photo;
}

function nextPhoto() {
  if (currentPhotoList.length === 0) return;
  currentPhotoIndex = (currentPhotoIndex + 1) % currentPhotoList.length;
  document.getElementById('modalImage').src = currentPhotoList[currentPhotoIndex].photo;
}

document.getElementById('photoModal').onclick = function(e) {
  if (e.target.id === 'photoModal') {
    this.style.display = 'none';
  }
};

// åˆå§‹åŒ–
loadDiary();
</script>
</body>
</html>l>


